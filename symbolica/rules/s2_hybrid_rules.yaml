rules:
  # S2: Hybrid Rules (using PROMPT for sentiment)
  - id: "credit_score_eligibility"
    priority: 100
    condition: "credit_score is not None and credit_score < 600"
    actions:
      approved: false
      reason: "credit_score_too_low"
      sentiment: "{{ PROMPT('Analyze the sentiment of this text and respond with exactly one word in lowercase: positive, negative, or neutral. Text: {feedback}') if feedback is not None else 'neutral' }}"
    tags: ["eligibility", "hybrid"]
    
  - id: "positive_sentiment_expedited"
    priority: 95
    condition: "feedback is not None and age >= 18 and credit_score >= 600 and PROMPT('Analyze the sentiment of this text and respond with exactly one word in lowercase: positive, negative, or neutral. Text: {feedback}') == 'positive'"
    actions:
      approved: true
      approval_type: "expedited"
      sentiment: "positive"
    tags: ["hybrid", "sentiment", "expedited"]
    
  - id: "negative_sentiment_standard"
    priority: 90
    condition: "feedback is not None and age >= 18 and credit_score >= 600 and PROMPT('Analyze the sentiment of this text and respond with exactly one word in lowercase: positive, negative, or neutral. Text: {feedback}') == 'negative'"
    actions:
      approved: true
      approval_type: "standard"
      sentiment: "negative"
    tags: ["hybrid", "sentiment", "standard"]
    
  - id: "neutral_sentiment_standard"
    priority: 85
    condition: "feedback is not None and age >= 18 and credit_score >= 600 and PROMPT('Analyze the sentiment of this text and respond with exactly one word in lowercase: positive, negative, or neutral. Text: {feedback}') == 'neutral'"
    actions:
      approved: true
      approval_type: "standard"
      sentiment: "neutral"
    tags: ["hybrid", "sentiment", "standard"] 